{% extends "base.html" %}

{% block content %}
<div class="column is-4 is-offset-4">
<h3 class="title">
    Relatório de visitantes:
  </h3>
  <div class="box">
  
    {% with messages = get_flashed_messages() %}
    {% if messages %}
    <div class="notification is-danger">           
            {{ messages[0] }}
        </div>
    {% endif %}
{% endwith %}

<form method="POST" action="">
    <label for="date-start">Início:</label>
    <input type="datetime-local" id="date-start"
           name="date-start" value="2019-10-01T00:00"
           min="2019-01-01T00:00" max="2200-12-31T23:59"/>
            <br/>
           
    <label for="date-end">Fim:</label>
    <input type="datetime-local" id="date-end"
           name="date-end" value="2019-10-01T00:00"
           min="2019-01-01T00:00" max="2200-12-31T23:59"/>
           <br/>

    <input type="submit" value="Gerar Relatório"/>

</form>
  
</div>
</div> 
   
        {% if visitors %}
        
        <div class="column is-4 is-offset-4">
        <div class="box">
        <table class="table is-striped is-fullwidth">
            
            <tr>
                <th class="has-text-centered">ID</th>
                <th class="has-text-centered">TIPO</th>
                <th class="has-text-centered">DATA</th>
            </tr>
            
            {% for visitor in visitors %}
            <tr>
                <td class="has-text-centered">{{ visitor.id }}</td>
                <td class="has-text-centered">{{ visitor.detect_type }}</td>
                <td class="has-text-centered">{{ visitor.detect_date.strftime('%b/%d/%Y %H:%M:%S') }}</td>
            </tr>
        
            {% endfor %}
        </table>
</div>
</div>
        {% endif %}
{% endblock %}